const table=document.getElementsByTagName("table")[0];let subjects;function insertSubjectSelect(e){const t=e.parentElement.parentElement.getElementsByTagName("td");let n;"id[]"===t[0].firstElementChild.name&&((n=document.createElement("input")).setAttribute("type","hidden"),n.setAttribute("name","room_id["+(table.rows.length-2)+"][]"),n.setAttribute("value",t[0].firstElementChild.value),t[1].appendChild(n));let i=document.createElement("select");i.setAttribute("name","subject_id["+(table.rows.length-2)+"][]"),t[1].appendChild(i);let l=document.createElement("option");i.appendChild(l),subjects.forEach(e=>{(l=document.createElement("option")).setAttribute("value",e.id),l.innerHTML=e.name,i.appendChild(l)}),i.focus()}window.onload=async function(){let e=await fetch("../school/json",{method:"GET",headers:{"Content-type":"application/json"}});if(!e.ok)return void console.log("JSON error");let t=await e.json();subjects=t.subjects},document.getElementById("insert").onclick=function(){let e=table.insertRow(table.rows.length),t=e.insertCell(0),n=document.createElement("input");n.setAttribute("type","text"),n.setAttribute("name","name[]"),n.setAttribute("maxlength","25"),t.appendChild(n),n.focus();let i=e.insertCell(1),l=document.createElement("select");l.setAttribute("name","subject_id["+(table.rows.length-2)+"][]"),i.appendChild(l);let s=document.createElement("option");l.appendChild(s),subjects.forEach(e=>{(s=document.createElement("option")).setAttribute("value",e.id),s.innerHTML=e.name,l.appendChild(s)});let r=e.insertCell(2);(n=document.createElement("input")).setAttribute("type","number"),n.setAttribute("name","members[]"),n.setAttribute("min","1"),n.setAttribute("value","1"),r.appendChild(n);let o=e.insertCell(3);return a=document.createElement("a"),a.setAttribute("href","#"),a.setAttribute("onclick","insertSubjectSelect(this); return false;"),a.setAttribute("title","Új tantárgy beszúrása"),o.appendChild(a),img=document.createElement("img"),img.setAttribute("src",document.location.origin+"/assets/img/icons/insert.png"),img.setAttribute("alt","Új tantárgy beszúrása"),a.appendChild(img),!1};