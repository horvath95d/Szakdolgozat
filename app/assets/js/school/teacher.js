const table = document.getElementsByTagName('table')[0];let subjects;window.onload = async function() {    let response = await fetch('../school/json', {        method: 'GET',        headers: {'Content-type': 'application/json'}    });    if (!response.ok) {        console.log('JSON error')        return;    }    let promise = await response.json();    subjects = promise.subjects;}document.getElementById('insert').onclick = function() {    let row = table.insertRow(table.rows.length);    let cell0 = row.insertCell(0);        let input = document.createElement('input');        input.setAttribute('type', 'text');        input.setAttribute('name', 'name[]');        input.setAttribute('maxlength', '25');        cell0.appendChild(input);        input.focus();        let cell1 = row.insertCell(1);        let select = document.createElement('select');        select.setAttribute('name', 'subject_id['+(table.rows.length-2)+'][]');        cell1.appendChild(select);        let option = document.createElement('option');        option.innerHTML = '';        select.appendChild(option);        subjects.forEach(subject => {            option = document.createElement('option');            option.setAttribute('value', subject['id']);            option.innerHTML = subject['name'];            select.appendChild(option);        });    let cell2 = row.insertCell(2);        input = document.createElement('input');        input.setAttribute('type', 'number');        input.setAttribute('name', 'lesson_number[]');        input.setAttribute('min', 1);        input.setAttribute('value', 1);        cell2.appendChild(input);    row.insertCell(3);    let cell4 = row.insertCell(4);        let a = document.createElement('a');        a.setAttribute('href', '#');        a.setAttribute('onclick', 'insertSubjectSelect(this); return false;');        a.setAttribute('title', 'Új tantárgy beszúrása');        cell4.appendChild(a);        let img = document.createElement('img');        img.setAttribute('src', document.location.origin+'/assets/img/icons/insert.png');        img.setAttribute('alt', 'Új tantárgy beszúrása');        a.appendChild(img);    return false;}function insertSubjectSelect(element) {    const tr = element.parentElement.parentElement;    const td = tr.getElementsByTagName('td');    let input;    if (td[0].firstElementChild.name === 'id[]') {        input = document.createElement('input');        input.setAttribute('type', 'hidden');        input.setAttribute('name', 'teacher_id[' + (table.rows.length - 2) + '][]');        input.setAttribute('value', td[0].firstElementChild.value);        td[1].appendChild(input);    }    let select = document.createElement('select');    select.setAttribute('name', 'subject_id['+(table.rows.length-2)+'][]');    td[1].appendChild(select);    let option = document.createElement('option');    select.appendChild(option);    subjects.forEach(subject => {        option = document.createElement('option');        option.setAttribute('value', subject['id']);        option.innerHTML = subject['name'];        select.appendChild(option);    });    select.focus();}