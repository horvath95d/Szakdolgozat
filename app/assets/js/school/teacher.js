const table=document.getElementsByTagName("table")[0];let subjects;function insertSubjectSelect(e){const t=e.parentElement.parentElement.getElementsByTagName("td");let n;"id[]"===t[0].firstElementChild.name&&((n=document.createElement("input")).setAttribute("type","hidden"),n.setAttribute("name","teacher_id["+(table.rows.length-2)+"][]"),n.setAttribute("value",t[0].firstElementChild.value),t[1].appendChild(n));let l=document.createElement("select");l.setAttribute("name","subject_id["+(table.rows.length-2)+"][]"),t[1].appendChild(l);let i=document.createElement("option");l.appendChild(i),subjects.forEach(e=>{(i=document.createElement("option")).setAttribute("value",e.id),i.innerHTML=e.name,l.appendChild(i)}),l.focus()}window.onload=async function(){let e=await fetch("../school/json",{method:"GET",headers:{"Content-type":"application/json"}});if(!e.ok)return void console.log("JSON error");let t=await e.json();subjects=t.subjects},document.getElementById("insert").onclick=function(){let e=table.insertRow(table.rows.length),t=e.insertCell(0),n=document.createElement("input");n.setAttribute("type","text"),n.setAttribute("name","name[]"),n.setAttribute("maxlength","25"),t.appendChild(n),n.focus();let l=e.insertCell(1),i=document.createElement("select");i.setAttribute("name","subject_id["+(table.rows.length-2)+"][]"),l.appendChild(i);let s=document.createElement("option");s.innerHTML="",i.appendChild(s),subjects.forEach(e=>{(s=document.createElement("option")).setAttribute("value",e.id),s.innerHTML=e.name,i.appendChild(s)});let r=e.insertCell(2);(n=document.createElement("input")).setAttribute("type","number"),n.setAttribute("name","lesson_number[]"),n.setAttribute("min",1),n.setAttribute("value",1),r.appendChild(n);let a=e.insertCell(3),c=document.createElement("a");c.setAttribute("href","#"),c.setAttribute("onclick","insertSubjectSelect(this); return false;"),c.setAttribute("title","Új tantárgy beszúrása"),a.appendChild(c);let o=document.createElement("img");return o.setAttribute("src",document.location.origin+"/assets/img/icons/insert.png"),o.setAttribute("alt","Új tantárgy beszúrása"),c.appendChild(o),!1};