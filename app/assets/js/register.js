var schools, users;/*var form = document.getElementsByTagName('form')[0];form.submit = function (event) {    console.log('run');    if (form.checkValidity() === false) {        event.preventDefault();        event.stopPropagation();    }    form.classList.add('was-validated');}*/(function() {    window.addEventListener('load', async function() {        let response = await fetch('../auth/json', {            method: 'GET',            headers: {                'Content-type': 'application/json'            }        });            if (!response.ok) {            console.log('JSON error')            return;        }                let promis = await response.json();        schools = promis.schools;        users = promis.users;        var form = document.getElementsByTagName('form')[0];        form.addEventListener('submit', function(event) {            if (form.checkValidity() === false) {                event.preventDefault();                event.stopPropagation();            }            form.classList.add('was-validated');        }, false);    }, false);})();// username uniquevar username = document.getElementById('username');username.onkeyup = function() {    var error;    users.forEach(user => {        if (user['username'] == username.value)            error = true;    });    showError(username, error);  }// emial uniquevar emial = document.getElementById('email');emial.onkeyup = function() {    var error;    users.forEach(user => {        if (user['email'] == email.value)            error = true;    });    showError(emial, error)}// school fullName uniquevar fullName = document.getElementById('full_name');full_name.onkeyup = function() {    var error;    schools.forEach(school => {        if (school['full_name'] == fullName.value)            error = true;    });    showError(full_name, error)}// school shortName uniquevar shortName = document.getElementById('short_name');short_name.onkeyup = function() {    var error;    schools.forEach(school => {        if (school['short_name'] == shortName.value)            error = true;    });    showError(short_name, error)}function showError(element, error) {    if (error)        element.setCustomValidity('error');    else        element.setCustomValidity('');}// passwordvar password = document.getElementById('password');var confirm_password = document.getElementById('confirm-password');password.onchange = validatePassword;confirm_password.onkeyup = validatePassword;function validatePassword() {    if (password.value != confirm_password.value)        confirm_password.setCustomValidity('error');    else        confirm_password.setCustomValidity('');}// ---------------// School type// ---------------var checkbox = document.getElementById('checkbox');var fullName = document.getElementById('full_name');var fullNameParent = fullName.parentElement;var shortName = document.getElementById('short_name');var year1 = document.getElementById('year1');var year2 = document.getElementById('year2');var days = document.getElementById('days');var times = document.getElementById('times');var code_tip = document.getElementById('code-tip');checkbox.onchange = function() {    fullNameParent.innerHTML = '';    if (checkbox.checked) {        select = document.createElement('select');        select.setAttribute('id', 'full_name');        select.setAttribute('class', 'form-control form-control-sm w-75');        select.setAttribute('name', 'full_name');        select.setAttributeNode(document.createAttribute('required'));        schools.forEach(school => {            option = document.createElement('option');            option.setAttribute('value', school['id']);            option.innerHTML = school['full_name'];            select.appendChild(option);        });        fullNameParent.appendChild(select);        shortName.setAttributeNode(document.createAttribute('disabled'));        year1.setAttributeNode(document.createAttribute('disabled'));        year2.setAttributeNode(document.createAttribute('disabled'));        days.setAttributeNode(document.createAttribute('disabled'));        times.setAttributeNode(document.createAttribute('disabled'));                code_tip.innerHTML = 'Add meg az iskolához tartozó kódot!';    } else {        input = document.createElement('input');        input.setAttribute('id', 'full_name');        input.setAttribute('class', 'form-control form-control-sm w-75');        input.setAttribute('name', 'full_name');        input.setAttributeNode(document.createAttribute('required'));        fullNameParent.appendChild(input);        shortName.removeAttribute('disabled');        year1.removeAttribute('disabled');        year2.removeAttribute('disabled');        days.removeAttribute('disabled');        times.removeAttribute('disabled');        code_tip.innerHTML = 'Ezt a kódot kell megadni, ha egy új felhasználó csatlakozik az iskola órarendjéhez.';    }}// ---------------// Show code// ---------------var eye = document.getElementById('eye');var code = document.getElementById('code');if (eye && code) {    eye.onmousedown = function() {        eye.innerHTML = '<i class="far fa-eye"></i>';        code.type = 'text';    }        eye.onmouseup = function() {        eye.innerHTML = '<i class="far fa-eye-slash"></i>';        code.type = 'password';    }        eye.onmouseout = function() {        eye.innerHTML = '<i class="far fa-eye-slash"></i>';        code.type = 'password';            }}