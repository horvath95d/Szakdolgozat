const table=document.getElementsByTagName("table")[0];let subjects,teachers,teachers_subjects;function changeTeacherList(e){const t=e.parentElement.nextElementSibling.firstElementChild;t.innerHTML="",teachers_subjects.forEach(n=>{n.subject_id===e.value&&teachers.forEach(e=>{let s;n.teacher_id===e.id&&((s=document.createElement("option")).setAttribute("value",e.id),s.innerHTML=e.name,t.appendChild(s))})})}window.onload=async function(){let e=await fetch("../../lesson/json",{method:"GET",headers:{"Content-type":"application/json"}});if(!e.ok)return void console.log("JSON error");let t=await e.json();subjects=t.subjects,teachers=t.teachers,teachers_subjects=t.teachers_subjects},document.getElementById("insert").onclick=function(){let e=table.insertRow(table.rows.length),t=e.insertCell(0),n=document.createElement("select");n.setAttribute("name","subject_id[]"),n.setAttribute("onchange","changeTeacherList(this)"),t.appendChild(n),n.focus();let s=document.createElement("option");n.appendChild(s),subjects.forEach(e=>{(s=document.createElement("option")).setAttribute("value",e.id),s.innerHTML=e.name,n.appendChild(s)});let c=e.insertCell(1);(n=document.createElement("select")).setAttribute("name","teacher_id[]"),c.appendChild(n),s=document.createElement("option"),n.appendChild(s);let a=e.insertCell(2),i=document.createElement("input");return i.setAttribute("type","number"),i.setAttribute("name","count[]"),i.setAttribute("min","1"),i.setAttribute("value","1"),a.appendChild(i),e.insertCell(3),!1};